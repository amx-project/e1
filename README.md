# 地図を里親しています

## はじめに
法務省が公開した地図XMLファイルを、アダプト・ア・パークのようにアダプト（里親）する「法務省地図XMLアダプトプロジェクト」です。

今回は、我々の活動の概要を紹介します。

![ソーシャルプレビューイメージ](https://repository-images.githubusercontent.com/591343419/c8f5fe55-f6bb-4393-95cf-4bcbb16ce0d4)

## 「法務省地図XMLアダプトプロジェクト」とは
### プロジェクト立ち上げの経緯
　2023年1月23日、法務省登記簿備付地図XMLデータが公開されました。これを知った私たちは、このデータを使ってオープンにウェブ地図アプリケーションを作成することができると考え、非常に興奮しました。しかし、個人で完了するには時間がかかりすぎるし、個人ではアプリケーションの幅が拡がりにくいものです。また、作業が重複するのはもったいないと思いました。そこで、インターネット上の友人と協力して、一緒に取り組むことを考えました。

まず、このプロジェクトについてのアイデアを共有しました。すでに手を動かし始めている多くの人とつながることができ、GitHub organization を共有することでプロジェクトの形式が成立することになりました。

次に、実際に手を動かして成果を作ることを主な仕事としながら、プロジェクトに参加する皆さんの相互連絡を調整しました。地図アプリケーションの機能やデザインを進める人もいましたし、データの取り込み方法や処理方法を速度重視で検討する人もいました。

10日後、私たちは完成した地図アプリケーションをリリースしました。それは私たちが想像していた以上に素晴らしいもので、多くの人々から好評を博しました。このプロジェクトを通じて、私たちは多くのことを学び、また、コミュニケーションと協力の重要性を再確認することができました。

### プロジェクトの体制について
私たちは、GitHub organization とメッセージングソフトウェアを使用して、コミュニケーションを促進し、進捗状況を交換しました。

### 「法務省地図XMLアダプトプロジェクト」がすること（活動範囲）
法務省地図XMLデータには、わかってもらうべき価値があるから、多くの方に「みてわかる」状態になるまで、データを触っていくこと、その結果を共有することで「みてわかる」人を増やし、さらに多くの人に参加してもらって地図XMLのより深い価値を、より「みてわかる」ように示してもらうこと、こういったビジョンを共有して、活動を進めていきました。

法務省地図XMLアダプトプロジェクトでは、関心を持った人が関心を持った分野に自主的に取り込むことを基本としています。多種多様なメンバーが集うことで、誰かのアウトプットが別の人に役に立つような良い流れが組み上がってきました。いくつかのサブプロジェクトを紹介します。

どれひとつ取っても大きな作業量を要するものであり、相互の協力がなければ実現はもっと遅くなったことでしょう。

データ公開、加工、タイルサーバ提供といった上流工程があって、ウェブ地図サイトの作成やユーザインタフェースの作り込みといったユーザに近い工程が実現できます。双方の工程が相互に影響しあって高め合っていくような形を目指しています。

#### データの整理と検証(kuwanauchi / kuwanauchi_digest)

G空間データセンターからの法務省地図XMLデータの提供 UI は、特定の地域のデータを手に入れたい方には便利なものですが、我々のようにデータセット全体を手広く取り扱う場合にはやや不便なところがありました。

そこで、地図XMLデータを一括して取得しやすいように取りまとめたリポジトリを作っています。

https://github.com/amx-project/kuwanauchi

また、データそのものの形式的検証も進めています。

https://github.com/amx-project/kuwanauchi_digest

その他、我々のプロジェクトの内外で、各種のデータ検証プロジェクトが進んでいます。

#### データのクラウド最適化 (a-spec / amx-a)
地図データをウェブブラウザでそのまま表示するために、地図XMLデータをクラウド最適なデータ形式に変換しました。

具体的には、ベクトルタイルという形式でウェブにデータを提供することにし、多数に別れてしまうベクトルタイルを PMTiles という形式のパッケージに収めることにしました。

そのデータをウェブ地図で実際に表示するサイトを https://amx-project.github.io/a/ においています。

また、ベクトルタイルは機械判読可能な形式であり、どのような設計のベクトルタイルに変換したかを https://amx-project.github.io/a-spec/ にまとめています。

これらのプロジェクトで a という名前を使ったのは、UNIX で a.out というファイル名が使われることを真似たためです。ただ、a だけだ分かりにくいので、ここで作った素のウェブ地図をコミュニティでは amx-a (アマクサ)とも呼んでいます。

#### データのホスティング
クラウド最適化したデータは数十GBになりますが、このデータを有効にホストするための工夫も行なっています。

さくらインターネットは、Code for Japan を通じて法務省地図XMLデータアダプトプロジェクトにサーバ資源を現物提供していただいています。さくらインターネットさんのサーバは、サーバ転送量の無制限化が進んでいるので、地図XMLのような大容量になりがちなデータを提供する場合にも魅力的です。

#### ウェブ地図の作成
上記の流れでインターネットに実際に提供されたベクトルタイルを、ウェブ地図として閲覧可能にしたサイトである「今ここ何番地」を開発し、また運用しています。

https://office-shirado.github.io/Moj_Maps/

### 「法務省地図XMLアダプトプロジェクト」がしないこと
地図XMLアダプトプロジェクトでは、計画や統制、リソース管理などの従来のプロジェクト管理手法をあえて取り入れず、自由な形でプロジェクトを進めることを選択しています。

このようなアプローチは、自己組織化チームと呼ばれ、チーム内で自律的に意思決定をし、プロジェクトを進めていくことを目的としています。具体的には、チーム内のメンバーが自分たちの興味やスキルに基づいて、プロジェクトに必要なタスクを自由に担当することができます。

この手法の利点は、従来のプロジェクト管理手法よりも柔軟であることです。メンバーが自分たちのやりたいことを自由に行うことができるため、やる気が高まり、クリエイティブなアイデアが生まれる可能性が高くなります。また、メンバー自身が自己管理し、自律的に進めるため、管理コストが低減されることも期待できます。

しかしながら、この手法にはデメリットもあります。メンバー間でのコミュニケーション不足や、プロジェクト全体の方向性や目標が明確になっていないため、プロジェクト全体の進捗管理が難しくなることがあります。また、プロジェクトに必要なリソースが適切に配分されていない場合もあります。

このように、地図XMLアダプトプロジェクトが自己組織化チームを採用していることは、柔軟なアプローチができる一方、全体の方向性や目標を明確にすることが重要であることを示しています。

そこで、「法務省地図XMLデータ」とは何であり、これが公開されたことの意義や可能性について理解を共有することが重要になります。我々が把握したことを、次のとおり紹介します。

## 「法務省地図XMLデータ」とは
### データが公開された経緯
[法務省の情報](https://www.moj.go.jp/MINJI/minji05_00494.html)によれば、このデータ公開が応えるニーズには次のようなものがあるそうです。

- 農業分野での情報通信技術活用のため
- 農業分野以外での情報通信技術活用のため
- 民間事業者でのデータ利活用推進のため

### データが公開される意義について

> 生活関連・公共サービス関連情報との連携や、都市計画・まちづくり、災害対応などの様々な分野で、地図データがオープンデータとして広く利用され、新たな経済効果や社会生活への好影響をもたらすことが期待されます。
https://www.moj.go.jp/MINJI/minji05_00494.html

### データが公開されたことによる可能性について
今までは、平日に法務局の窓口で紙交付又はインターネットでPDFで取得するしか方法がありませんでした。

データが公開されたことで、最新の公図ではないものの、いつでも、誰でも、無料で公図データを取得することが可能となりました。

紙の公図・PDFと違い、地図XMLデータはGISデータとしても活用可能なデータであり、日常業務だけでなく、災害時などにも公図データがスムーズに扱える人やソフトウェアが増えることが見込まれます。

このような可能性を開くという意味でも、今回のデータ公開は有意義です。今後、公図データがスムーズに扱える人が増えることで、さらに、データ品質の向上を加速できる可能性があると思います。

データを更新する必要性は、①最新の状況に追従するため、②内容の誤りを修正するため、③形式の誤りを修正するため、などがありますが、特に③のための修正については、データがオープンになったことで加速できる可能性があると思います。

③のタイプの誤りには、属性名の取り違えや文字化けなどが見られています。比較的機械的な修正なので、我々のプロジェクトからのフィードバック経路が今後整備されれば、データの品質向上の加速という形で、データが公開によるメリットを提供できる可能性があると考えています。

今後、特に③のタイプの誤りに対してフィードバックができる窓口ができてくると、このメリットを実現できるように思っています。

参考：https://speakerdeck.com/sakaik/what-is-moj-map-xml?slide=37

## 「法務省地図XMLアダプトプロジェクト」が目指すもの
### 地図XMLや地籍の啓発センター

法務省地図（公図）は社会基盤データの一つであり、一部ではありますが、それが容易に可視化できることで、公図が身近な存在となれば嬉しいと我々は思っています。

### 開発者の持続的なコミュニティ

地図XMLはこれまでも存在したものであり、これからも存在するものです。このデータを取り扱うノウハウを時を超えて共有していくコミュニティとなることを目指します。

### 面白がってくれるユーザを増やしたい

面白がる人を増やしたいですね。

## 今後の活動予定内容、スケジュール

クラウド最適化した地図データをウェブに出していく、という仕事は、必ずしも法務省地図XMLフォーマットに依存したものではありません。

このプロジェクトを通じて、数百GB程度の地図データをカジュアルに出していく技術が手に入りました。この技術を一般化し、今後さらに大量にオープン化されていくと思われる、三次元点群や三次元都市モデルにも適用できるようにしていく動きを進めています。

この動きに Smart Maps Bazaar という名前をつけて、https://github.com/unopengis/smb といったサイトで進めています。

## おわりに

平成２３年の東日本大震災の時は、震災関連業務で地図XMLで情報が提供されましたが、ソフトウェアの対応が追いついておらず、変換作業に膨大な時間を要しました。

令和５年１月２３日以降、本プロジェクト以外でも様々なソフトウェアが地図XMLに対応したり、変換ツールもできている状況で、大規模災害時に公図を活用する業務があれば、東日本大震災よりもスムーズな対応ができると思っています。